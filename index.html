<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>WLUV TRAVEL | Explore The Unknown</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&family=Playfair+Display:wght@400;700;900&display=swap');
        
        html { scroll-behavior: smooth; }
        body { font-family: 'Noto Sans TC', sans-serif; background-color: #fcfcfc; margin: 0; color: #1a1a1a; }
        .serif { font-family: 'Playfair Display', serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); }
        .card-gradient { background: linear-gradient(to top, rgba(0,0,0,0.85) 0%, rgba(0,0,0,0.2) 60%, transparent 100%); }
        .active-scale:active { transform: scale(0.96); transition: 0.1s; }
        
        /* 滾動動畫 */
        header { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        header.scrolled { height: 70px !important; padding-top: 0 !important; padding-bottom: 0 !important; }
        header.scrolled h1 { font-size: 1.5rem !important; }
        header.scrolled .sub-logo { opacity: 0; visibility: hidden; height: 0; margin-top: 0 !important; }
        
        nav { transition: top 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        nav.scrolled { top: 70px !important; }

        /* 旅人故事樣式 */
        .insta-card { background: white; border: 1px solid #efefef; border-radius: 1.5rem; flex-shrink: 0; width: 300px; margin-left: 1.5rem; box-shadow: 0 4px 15px rgba(0,0,0,0.05); cursor: pointer; }
        .insta-img { width: 100%; aspect-ratio: 1/1; object-fit: cover; border-bottom: 1px solid #fafafa; }
        
        .whatsapp-float {
            position: fixed; width: 60px; height: 60px; bottom: 30px; right: 30px;
            background-color: #25d366; color: #FFF; border-radius: 50px;
            z-index: 1000; display: flex; align-items: center; justify-content: center;
            box-shadow: 2px 5px 15px rgba(0,0,0,0.1);
        }
    </style>
</head>
<body class="pb-24">

    <div id="details-modal" class="fixed inset-0 z-[400] flex items-center justify-center p-6 opacity-0 invisible bg-black/70 backdrop-blur-sm">
        <div class="modal-content bg-white w-full max-w-sm rounded-[2.5rem] overflow-hidden shadow-2xl">
            <div class="p-8 pb-4">
                <p class="text-[10px] tracking-[0.4em] text-stone-300 font-bold uppercase mb-2">Preview</p>
                <h2 id="modal-title" class="text-2xl font-black text-gray-900 leading-tight">行程標題</h2>
            </div>
            <div id="modal-body" class="p-8 pt-2 max-h-[50vh] overflow-y-auto"></div>
            <div class="p-8 pt-4">
                <button onclick="closeModal()" class="w-full bg-[#1a1614] text-white py-4 rounded-2xl text-[12px] font-bold uppercase tracking-[0.2em] active-scale shadow-lg">Close</button>
            </div>
        </div>
    </div>

    <a href="javascript:void(0)" onclick="startGeneralInquiry()" class="whatsapp-float active-scale">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="white"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L0 24l6.335-1.662c1.72.94 3.659 1.437 5.634 1.437h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
    </a>

    <header id="main-header" class="fixed top-0 left-0 right-0 z-[300] glass border-b border-stone-100 px-8 py-8 flex justify-between items-center h-[120px]">
        <div class="flex flex-col items-start">
            <h1 class="serif text-4xl font-black tracking-widest text-gray-900 leading-none transition-all duration-300">WLUV TRAVEL</h1>
            <div class="sub-logo text-[8px] tracking-[0.55em] text-stone-400 uppercase font-black mt-3 ml-1 transition-all duration-300">EXPLORE THE UNKNOWN</div>
        </div>
        <div id="status-tag" class="text-[8px] bg-stone-100 text-stone-500 px-2 py-1 rounded-md font-bold uppercase italic tracking-tighter">Sync Active</div>
    </header>

    <nav id="main-nav" class="fixed top-[120px] left-0 right-0 z-[290] bg-white border-b border-stone-50 overflow-hidden shadow-sm h-14">
        <div class="flex overflow-x-auto px-4 no-scrollbar items-center h-full space-x-2">
            <button onclick="scrollToSection('custom-section')" class="px-5 flex-none active-scale font-bold text-[10px] text-red-600 tracking-widest uppercase">私人訂製</button>
            <button onclick="scrollToSection('china-section')" class="px-5 flex-none active-scale font-bold text-[10px] text-orange-600 tracking-widest uppercase">中國選品</button>
            <button onclick="scrollToSection('self-section')" class="px-5 flex-none active-scale font-bold text-[10px] text-gray-800 tracking-widest uppercase">自家精選</button>
            <button onclick="scrollToSection('aurora-section')" class="px-5 flex-none active-scale font-bold text-[10px] text-gray-800 tracking-widest uppercase">世界極光</button>
            <button onclick="scrollToSection('jpkr-section')" class="px-5 flex-none active-scale font-bold text-[10px] text-gray-800 tracking-widest uppercase">日韓精選</button>
            <button onclick="scrollToSection('sea-section')" class="px-5 flex-none active-scale font-bold text-[10px] text-gray-800 tracking-widest uppercase">東南亞</button>
            <button onclick="scrollToSection('corp-section')" class="px-5 flex-none active-scale font-bold text-[10px] text-gray-800 tracking-widest uppercase">商務服務</button>
            <button onclick="scrollToSection('review-section')" class="px-5 flex-none active-scale font-bold text-[10px] text-gray-800 tracking-widest uppercase">旅人故事</button>
        </div>
    </nav>

    <main class="pt-[180px]">
        <section id="custom-section" class="px-8 pt-10 pb-6">
            <div id="hero-carousel" class="relative bg-stone-900 rounded-[3rem] p-10 min-h-[340px] text-white overflow-hidden shadow-2xl">
                <div id="hero-bg" class="absolute inset-0 bg-cover bg-center transition-opacity duration-1000 opacity-60 scale-105" style="background-image: url('https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1000&q=80')"></div>
                <div class="absolute inset-0 bg-gradient-to-br from-black/80 via-black/30 to-transparent"></div>
                <div class="relative z-10 flex flex-col h-full">
                    <p class="text-[10px] tracking-[0.5em] text-white/60 uppercase font-black mb-4 italic">Bespoke Journey</p>
                    <h2 class="serif text-4xl font-bold mb-8 italic leading-tight">私人訂製<br>探索未知之境</h2>
                    <div class="mt-auto">
                        <button onclick="startInquiry('私人訂製行程')" class="bg-white text-black px-8 py-4 rounded-2xl text-[11px] font-black uppercase tracking-[0.2em] active-scale flex items-center gap-3 shadow-2xl">
                            <span>開始詢問</span>
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="3"><path d="M5 12h14M12 5l7 7-7 7"/></svg>
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <div id="dynamic-lists">
            <section id="china-section" class="pt-8"><div class="px-8 mb-4"><h2 class="serif text-2xl font-bold italic text-orange-800">中國深度選品</h2></div><div id="list-china" class="flex overflow-x-auto space-x-6 px-8 no-scrollbar h-[480px]"></div></section>
            <section id="self-section" class="pt-10"><div class="px-8 mb-4"><h2 class="serif text-2xl font-bold italic">自家精選團</h2></div><div id="list-self" class="flex overflow-x-auto space-x-6 px-8 no-scrollbar h-[480px]"></div></section>
            <section id="aurora-section" class="pt-10"><div class="px-8 mb-4"><h2 class="serif text-2xl font-bold italic">世界極光</h2></div><div id="list-aurora" class="flex overflow-x-auto space-x-6 px-8 no-scrollbar h-[480px]"></div></section>
            <section id="jpkr-section" class="pt-10"><div class="px-8 mb-4"><h2 class="serif text-2xl font-bold italic">日韓精選</h2></div><div id="list-jpkr" class="flex overflow-x-auto space-x-6 px-8 no-scrollbar h-[430px]"></div></section>
            <section id="sea-section" class="pt-10"><div class="px-8 mb-4"><h2 class="serif text-2xl font-bold italic text-emerald-900">東南亞精選</h2></div><div id="list-sea" class="flex overflow-x-auto space-x-6 px-8 no-scrollbar h-[430px]"></div></section>
            <section id="corp-section" class="pt-16 bg-stone-900 py-20 mt-16 text-white text-center"><h2 class="serif text-2xl font-bold italic mb-8">商務服務</h2><div id="list-corp" class="flex overflow-x-auto space-x-6 px-8 no-scrollbar h-[400px]"></div></section>
        </div>
        
        <section id="review-section" class="pt-16 pb-10 bg-white">
            <div class="px-8 mb-8 text-center">
                <h2 class="serif text-2xl font-bold italic text-gray-800">旅人故事</h2>
                <p class="text-[9px] tracking-[0.3em] text-stone-400 uppercase mt-2 font-bold text-center">Traveler Stories</p>
            </div>
            <div id="list-review" class="flex overflow-x-auto px-8 no-scrollbar snap-x scroll-smooth"></div>
        </section>
    </main>

    <footer class="bg-black text-white py-20 text-center border-t border-white/5">
        <h2 class="serif text-3xl font-black tracking-[0.2em]">WLUV TRAVEL</h2>
        <p class="text-[9px] tracking-[0.6em] text-stone-500 uppercase mt-4 mb-10 font-black">EXPLORE THE UNKNOWN</p>
        <div class="h-[1px] w-12 bg-stone-800 mx-auto mb-10"></div>
        <p class="text-stone-700 text-[8px] tracking-widest uppercase">© 2026 WLUV TRAVEL Global. All Rights Reserved.</p>
    </footer>

    <script>
        const WHATSAPP = "60108850710";
        const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRolvSEFgDYOzDZWM-xf0UixQTLHRfxGsz-lxlAOVcRf8s5dF2Uw2TBbtp_JCERnAnL_vY8dqT15LVi/pub?output=csv';

        // --- 核心 WhatsApp 預填邏輯 ---
        function startInquiry(itemName = "精選行程") {
            const template = `您好！我想諮詢 WLUV TRAVEL 的旅行服務：\n\n【 預選項目 】：${itemName}\n【 目的地 】：\n【 出發日期 】：\n【 人數 】：\n【 預算 】：\n【 其他需求 】：\n\n————————————\n謝謝 WLUV TRAVEL 團隊！`;
            window.open(`https://wa.me/${WHATSAPP}?text=${encodeURIComponent(template)}`, '_blank');
        }

        function startGeneralInquiry() {
            startInquiry("一般諮詢");
        }

        // 滾動縮小
        window.addEventListener('scroll', () => {
            const header = document.getElementById('main-header');
            const nav = document.getElementById('main-nav');
            if (window.scrollY > 50) {
                header.classList.add('scrolled');
                nav.classList.add('scrolled');
            } else {
                header.classList.remove('scrolled');
                nav.classList.remove('scrolled');
            }
        });

        function openModal(title, rawContent) {
            document.getElementById('modal-title').innerText = title;
            const body = document.getElementById('modal-body');
            body.innerHTML = '';
            const items = rawContent.split('|').map(i => i.trim()).filter(i => i !== "");
            items.forEach(text => {
                const div = document.createElement('div');
                div.className = 'detail-item';
                div.innerHTML = `<span class="detail-icon">✦</span><span>${text}</span>`;
                body.appendChild(div);
            });
            const modal = document.getElementById('details-modal');
            modal.classList.remove('invisible');
            modal.classList.add('opacity-100', 'active');
        }

        function closeModal() {
            const modal = document.getElementById('details-modal');
            modal.classList.remove('opacity-100', 'active');
            setTimeout(() => modal.classList.add('invisible'), 300);
        }

        function scrollToSection(id) {
            const el = document.getElementById(id);
            if (el) {
                const isScrolled = window.scrollY > 50;
                const offset = isScrolled ? 130 : 185; 
                window.scrollTo({ top: el.offsetTop - offset, behavior: 'smooth' });
            }
        }

        // 背景切換
        const heroImages = [
            'https://images.unsplash.com/photo-1507525428034-b723cf961d3e?auto=format&fit=crop&w=1000&q=80',
            'https://images.unsplash.com/photo-1519681393784-d120267933ba?auto=format&fit=crop&w=1000&q=80',
            'https://images.unsplash.com/photo-1528127269322-539801943592?auto=format&fit=crop&w=1000&q=80',
            'https://images.unsplash.com/photo-1506744038136-46273834b3fb?auto=format&fit=crop&w=1000&q=80'
        ];
        let currentImgIdx = 0;
        setInterval(() => {
            const bg = document.getElementById('hero-bg');
            if (bg) {
                bg.style.opacity = '0';
                setTimeout(() => {
                    currentImgIdx = (currentImgIdx + 1) % heroImages.length;
                    bg.style.backgroundImage = `url('${heroImages[currentImgIdx]}')`;
                    bg.style.opacity = '0.6';
                }, 1000);
            }
        }, 5000);

        async function initData() {
            const status = document.getElementById('status-tag');
            try {
                const res = await fetch(`${CSV_URL}&t=${Date.now()}`);
                const text = await res.text();
                const rows = text.split(/\r?\n/).slice(1).map(r => r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/));
                const containers = {
                    'china': document.getElementById('list-china'),
                    'self': document.getElementById('list-self'), 'aurora': document.getElementById('list-aurora'),
                    'jpkr': document.getElementById('list-jpkr'), 'sea': document.getElementById('list-sea'),
                    'corp': document.getElementById('list-corp'), 'review': document.getElementById('list-review')
                };
                Object.values(containers).forEach(c => { if(c) c.innerHTML = ''; });

                rows.forEach((cols, idx) => {
                    if (cols.length < 5) return;
                    const catRaw = cols[0]?.replace(/"/g, '').trim() || "";
                    const title  = cols[1]?.replace(/"/g, '').trim() || "";
                    const date   = cols[2]?.replace(/"/g, '').trim() || "";
                    const price  = cols[3]?.replace(/"/g, '').trim() || "";
                    const img    = cols[4]?.replace(/"/g, '').trim() || "";
                    const stock  = cols[5]?.replace(/"/g, '').trim() || "";
                    const tags   = cols[7]?.replace(/"/g, '').trim() || "WLUV";

                    let target = null;
                    if (catRaw.includes("中國")) target = 'china';
                    else if (catRaw.includes("自家")) target = 'self';
                    else if (catRaw.includes("極光")) target = 'aurora';
                    else if (catRaw.includes("日韓")) target = 'jpkr';
                    else if (catRaw.includes("東南亞")) target = 'sea';
                    else if (catRaw.includes("商務")) target = 'corp';
                    else if (catRaw.includes("評論") || catRaw.includes("故事")) target = 'review';
                    
                    if (!target || !containers[target]) return;

                    if (target === 'review') {
                        const avatar = stock.startsWith('http') ? stock : `https://i.pravatar.cc/100?u=${idx}`;
                        containers[target].innerHTML += `
                            <div class="insta-card snap-center ml-6 first:ml-0 overflow-hidden" onclick="openModal('${title}', \`${price.replace(/`/g, '\\`')}\`)">
                                <div class="p-4 flex items-center space-x-3">
                                    <img src="${avatar}" class="w-8 h-8 rounded-full object-cover">
                                    <div><p class="text-[12px] font-bold text-gray-900">${title}</p><p class="text-[9px] text-stone-400 uppercase tracking-tighter">${date}</p></div>
                                </div>
                                <img src="${img}" class="insta-img">
                                <div class="p-4"><p class="text-[12px] text-gray-700 line-clamp-2"><span class="font-bold text-gray-900 mr-2">${title}</span>${price.split('|')[0]}</p></div>
                            </div>`;
                    } else {
                        const stockTag = (parseInt(stock) > 0) ? `<span class="bg-red-500 text-white text-[9px] px-2 py-1 rounded-full font-bold ml-2 animate-pulse">僅餘 ${stock} 席</span>` : '';
                        containers[target].innerHTML += `
                            <div class="flex-none w-[82vw] md:w-[380px] relative rounded-[3rem] overflow-hidden ml-6 first:ml-0 shadow-2xl bg-stone-100 active-scale">
                                <img src="${img}" class="w-full h-full object-cover" onclick="openModal('${title}', \`${price.replace(/`/g, '\\`')}\`)">
                                <div class="absolute inset-0 card-gradient p-8 flex flex-col justify-end pointer-events-none">
                                    <div class="flex gap-2 mb-3"><span class="bg-white/20 text-white text-[9px] px-3 py-1 rounded-full font-black uppercase border border-white/30">${tags}</span>${stockTag}</div>
                                    <p class="text-white/70 text-[10px] font-bold mb-1 uppercase tracking-[0.2em]">${date}</p>
                                    <h3 class="text-white text-3xl font-bold mb-5 leading-tight pointer-events-auto" onclick="openModal('${title}', \`${price.replace(/`/g, '\\`')}\`)">${title}</h3>
                                    <button onclick="startInquiry('${title}')" class="bg-white text-black w-full py-4 rounded-2xl text-[10px] font-black uppercase tracking-[0.3em] shadow-lg pointer-events-auto">諮詢詳情</button>
                                </div>
                            </div>`;
                    }
                });
                startAutoScroll();
                status.innerText = '● WLUV Active';
            } catch (e) { status.innerText = '● Sync Error'; }
        }

        function startAutoScroll() {
            const slider = document.getElementById('list-review');
            if (!slider) return;
            setInterval(() => {
                if (!document.getElementById('details-modal').classList.contains('active')) {
                    if (slider.scrollLeft + slider.offsetWidth >= slider.scrollWidth - 10) {
                        slider.scrollTo({ left: 0, behavior: 'smooth' });
                    } else {
                        slider.scrollBy({ left: 324, behavior: 'smooth' });
                    }
                }
            }, 4000);
        }

        initData();
    </script>
</body>
</html>
