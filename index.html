<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <title>TRVL X | Explore The Unknown</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;700&family=Playfair+Display:wght@400;700;900&display=swap');
        :root { --brand-green: #25D366; --soft-white: #fcfcfc; }
        html { scroll-behavior: smooth; -webkit-tap-highlight-color: transparent; }
        body { font-family: 'Noto Sans TC', sans-serif; background-color: var(--soft-white); color: #1a1a1a; margin: 0; }
        .serif { font-family: 'Playfair Display', serif; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .glass { background: rgba(255, 255, 255, 0.95); backdrop-filter: blur(15px); -webkit-backdrop-filter: blur(15px); }
        .card-gradient { background: linear-gradient(to top, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.4) 60%, transparent 100%); }
        .active-scale:active { transform: scale(0.96); transition: 0.1s; }
        
        @keyframes pulse-green {
            0% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(37, 211, 102, 0); }
            100% { box-shadow: 0 0 0 0 rgba(37, 211, 102, 0); }
        }
        .whatsapp-float {
            position: fixed; width: 60px; height: 60px; bottom: 30px; right: 30px;
            background-color: #25d366; color: #FFF; border-radius: 50px;
            z-index: 1000; display: flex; align-items: center; justify-content: center;
            animation: pulse-green 2s infinite; box-shadow: 2px 2px 10px rgba(0,0,0,0.2);
        }

        #preview-modal {
            position: fixed; inset: 0; z-index: 2000;
            background: rgba(0,0,0,0.85); backdrop-filter: blur(10px);
            display: none; align-items: center; justify-content: center; padding: 20px;
        }
        #preview-modal.show { display: flex; }
        .preview-item { display: flex; align-items: flex-start; margin-bottom: 12px; font-size: 13px; color: #4b5563; line-height: 1.6; }
        .preview-item::before { content: '✦'; margin-right: 10px; color: var(--brand-green); font-weight: bold; }
    </style>
</head>
<body class="pb-0">

    <a href="https://wa.me/60108850710" target="_blank" class="whatsapp-float active-scale">
        <svg width="32" height="32" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg"><path d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L0 24l6.335-1.662c1.72.94 3.659 1.437 5.634 1.437h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"/></svg>
    </a>

    <header class="sticky top-0 z-[100] glass border-b border-stone-100 px-8 py-8 flex justify-between items-end">
        <div class="flex flex-col items-start">
            <h1 class="serif text-4xl font-black tracking-widest text-gray-900 leading-none">TRVL X</h1>
            <div class="text-[9px] tracking-[0.5em] text-stone-400 uppercase font-bold mt-3">
                EXPLORE THE UNKNOWN
            </div>
        </div>
        <div id="status-tag" class="text-[8px] bg-stone-100 text-stone-500 px-2 py-1 rounded-md font-bold uppercase tracking-tighter">Ver 1.8.0 Stable</div>
    </header>

    <nav class="sticky top-[108px] z-[90] bg-white border-b border-stone-50 overflow-hidden">
        <div class="flex overflow-x-auto px-4 no-scrollbar items-center h-14">
            <button onclick="scrollToSection('aurora-section')" class="px-6 flex-none active-scale"><span class="text-[10px] font-bold text-gray-800 tracking-[0.2em] uppercase">世界極光</span></button>
            <div class="w-[1px] h-3 bg-stone-200 flex-none opacity-50"></div>
            <button onclick="scrollToSection('china-section')" class="px-6 flex-none active-scale"><span class="text-[10px] font-bold text-gray-800 tracking-[0.2em] uppercase">中國選品</span></button>
            <div class="w-[1px] h-3 bg-stone-200 flex-none opacity-50"></div>
            <button onclick="scrollToSection('corp-section')" class="px-6 flex-none active-scale"><span class="text-[10px] font-bold text-gray-800 tracking-[0.2em] uppercase">商務服務</span></button>
            <div class="w-[1px] h-3 bg-stone-200 flex-none opacity-50"></div>
            <button onclick="scrollToSection('review-section')" class="px-6 flex-none active-scale"><span class="text-[10px] font-bold text-gray-800 tracking-[0.2em] uppercase">旅人故事</span></button>
        </div>
    </nav>

    <main>
        <section id="aurora-section" class="pt-8"><div class="px-8 mb-4"><h2 class="serif text-2xl font-bold italic text-gray-800">世界極光</h2></div><div id="aurora-list" class="flex overflow-x-auto space-x-6 px-8 no-scrollbar h-[460px]"></div></section>
        <section id="china-section" class="pt-12 bg-stone-50 py-16 border-y border-stone-100"><div class="px-8 mb-4"><h2 class="serif text-2xl font-bold italic text-gray-800">中國選品</h2></div><div id="china-list" class="flex overflow-x-auto space-x-6 px-8 no-scrollbar h-[400px]"></div></section>
        <section id="corp-section" class="pt-12"><div class="px-8 mb-4"><h2 class="serif text-2xl font-bold italic text-gray-800">商務服務</h2></div><div id="corporate-list" class="flex overflow-x-auto space-x-6 px-8 no-scrollbar h-[400px]"></div></section>
        <section id="review-section" class="pt-12 pb-16"><div class="px-8 mb-10 text-center"><h2 class="serif text-2xl font-bold italic text-gray-800">旅人故事</h2></div><div id="review-list" class="flex overflow-x-auto space-x-6 px-8 no-scrollbar snap-x"></div></section>
    </main>

    <footer class="bg-stone-900 text-stone-400 py-20 px-10 mt-20">
        <div class="max-w-6xl mx-auto flex flex-col items-start">
            <div class="mb-10 text-left">
                <h2 class="serif text-5xl text-white tracking-widest font-black">TRVL X</h2>
                <p class="text-[10px] tracking-[0.6em] text-stone-500 uppercase mt-4 font-bold">EXPLORE THE UNKNOWN</p>
            </div>
            <div class="w-12 h-[1px] bg-stone-800 mb-10"></div>
            <div class="space-y-4 text-[11px] uppercase tracking-[0.2em] text-left">
                <p class="text-stone-300">WhatsApp: +60 108850710</p>
                <p class="text-stone-300">Email: explore@trvl-x.com</p>
                <div class="pt-12 opacity-30 text-[9px] tracking-normal lowercase">
                    © 2026 trvl x global exploration. <br>curating stories beyond borders.
                </div>
            </div>
        </div>
    </footer>

    <div id="preview-modal" onclick="closePreview()">
        <div class="bg-white rounded-[3rem] w-full max-w-sm p-10 shadow-2xl relative" onclick="event.stopPropagation()">
            <p class="text-[10px] text-stone-400 font-bold uppercase mb-3 tracking-[0.25em]">Preview</p>
            <h3 id="modal-title" class="text-2xl font-bold mb-6 text-gray-900 border-b border-stone-50 pb-4"></h3>
            <div id="modal-content" class="mb-10 text-stone-600"></div>
            <button onclick="closePreview()" class="w-full bg-stone-900 text-white py-4 rounded-2xl text-[11px] font-bold uppercase tracking-widest active-scale">Close</button>
        </div>
    </div>

    <script>
        const CSV_URL = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vRolvSEFgDYOzDZWM-xf0UixQTLHRfxGsz-lxlAOVcRf8s5dF2Uw2TBbtp_JCERnAnL_vY8dqT15LVi/pub?output=csv';
        const WHATSAPP = "60108850710";

        function scrollToSection(id) {
            const el = document.getElementById(id);
            if (el) {
                const offset = 180; 
                window.scrollTo({ top: el.getBoundingClientRect().top + window.pageYOffset - offset, behavior: 'smooth' });
            }
        }

        function showPreview(title, rawContent) {
            document.getElementById('modal-title').innerText = title;
            const modalContent = document.getElementById('modal-content');
            if (rawContent.includes('|')) {
                modalContent.innerHTML = rawContent.split('|').map(item => `<div class="preview-item">${item.trim()}</div>`).join('');
            } else {
                modalContent.innerHTML = `<p class="leading-loose text-sm italic">"${rawContent}"</p>`;
            }
            document.getElementById('preview-modal').classList.add('show');
        }

        function closePreview() { document.getElementById('preview-modal').classList.remove('show'); }

        function askDetails(title) {
            window.open(`https://wa.me/${WHATSAPP}?text=您好，我想諮詢 TRVL X 的行程：【${title}】`, '_blank');
        }

        async function initData() {
            const status = document.getElementById('status-tag');
            try {
                const res = await fetch(`${CSV_URL}&t=${Date.now()}`);
                const text = await res.text();
                const rows = text.split(/\r?\n/).slice(1).map(r => r.split(/,(?=(?:(?:[^"]*"){2})*[^"]*$)/));
                const containers = { '世界極光': document.getElementById('aurora-list'), '中國選品': document.getElementById('china-list'), '商務服務': document.getElementById('corporate-list'), '客人評論': document.getElementById('review-list') };
                Object.values(containers).forEach(c => { if(c) c.innerHTML = ''; });

                rows.forEach((cols, idx) => {
                    if (cols.length < 5) return;
                    let rawCat = cols[0].replace(/"/g, '').trim();
                    let cat = rawCat.includes("極光") ? "世界極光" : rawCat.includes("中國") ? "中國選品" : (rawCat.includes("商務") || rawCat.includes("企業")) ? "商務服務" : (rawCat.includes("評論") || rawCat.includes("留言")) ? "客人評論" : null;
                    if (!cat || !containers[cat]) return;
                    
                    const [title, date, price, img, stock, link, tags] = cols.slice(1).map(v => v ? v.replace(/"/g, '').trim() : "");

                    if (cat === '客人評論') {
                        containers[cat].innerHTML += `<div class="flex-none w-[78vw] md:w-[320px] bg-white border border-stone-100 p-8 rounded-[2.5rem] shadow-sm ml-8 first:ml-0 snap-center"><div class="flex items-center space-x-4 mb-6"><img src="${img}" class="w-12 h-12 rounded-full object-cover border border-stone-50" onerror="this.src='https://i.pravatar.cc/100?u=${idx}'"><div><p class="font-bold text-sm text-gray-900">${title}</p><p class="text-[10px] text-stone-400 uppercase tracking-tight">${date}</p></div></div><p class="text-stone-600 text-[13px] leading-loose italic mb-6">"${price}"</p><div class="flex flex-wrap"><span class="text-[9px] bg-stone-50 text-stone-500 px-3 py-1.5 rounded-full font-bold uppercase tracking-widest border border-stone-100">${tags || '旅人實測'}</span></div></div>`;
                    } else {
                        const stockNum = parseInt(stock) || 0;
                        const stockTag = stockNum > 0 ? `<span class="bg-red-500 text-white text-[9px] px-2 py-1 rounded-full font-bold ml-2 animate-pulse">僅餘 ${stockNum} 席</span>` : '';
                        containers[cat].innerHTML += `<div class="flex-none w-[85vw] md:w-[380px] relative rounded-[3.5rem] overflow-hidden ml-8 first:ml-0 bg-stone-100 shadow-2xl snap-center transition-all duration-500"><img src="${img}" class="w-full h-full object-cover" loading="lazy"><div class="absolute inset-0 card-gradient p-8 flex flex-col justify-end"><div class="flex items-center mb-4"><span class="bg-white/20 text-white text-[9px] px-3 py-1.5 rounded-full border border-white/20 uppercase font-bold tracking-widest">${tags || 'Exclusive'}</span>${stockTag}</div><button onclick="showPreview('${title}', '${price}')" class="text-left active-scale mb-6 focus:outline-none"><h3 class="text-white text-3xl font-bold mb-1 leading-tight">${title}</h3><p class="text-stone-300 text-[10px] tracking-[0.2em] uppercase mt-2 font-bold">查看亮點 ➔</p></button><button onclick="askDetails('${title}')" class="bg-white text-gray-900 w-full py-4 rounded-2xl text-[11px] font-bold uppercase tracking-[0.25em] shadow-lg active-scale border border-white">探索詳情 / 詢問</button></div></div>`;
                    }
                });
                status.innerText = '● 已同步雲端';
            } catch (e) { status.innerText = '● 連接中'; }
        }
        initData();
    </script>
</body>
</html>
